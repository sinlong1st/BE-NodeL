<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        function hashPassword(event) {
            event.preventDefault(); // Prevent default form submission
            const passwordField = document.getElementById("password");
            const hashedPasswordField = document.getElementById("hashedPassword");

            // Hash the password using MD5
            const hashedPassword = CryptoJS.MD5(passwordField.value).toString();

            // Set the hashed password into the hidden field
            hashedPasswordField.value = hashedPassword;

            // Clear the plaintext password field
            passwordField.value = "";

            // Submit the form
            document.querySelector("form").submit();
        }
    </script>
</head>
<body>
    <header class="header-container">
        <div class="header-title">
            <%= headerTitle || "Welcome!" %>
        </div>
        <div class="nav">
            <a href="/">Home</a>
            <a href="/about">About</a>
            <a href="/register">Register</a>
            <a href="/stats">Reports</a>
        </div>
    </header>

    <div class="registration-container">
        <h1>User Registration</h1>
        <form action="/register" method="POST" onsubmit="hashPassword(event)">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="Enter your email" required>

            <label for="password">Password:</label>
            <input type="password" id="password" name="password" placeholder="Enter your password" required>
            <input type="hidden" id="hashedPassword" name="hashedPassword">

            <label for="firstName">First Name:</label>
            <input type="text" id="firstName" name="firstName" placeholder="Enter your first name" required>
    
            <label for="lastName">Last Name:</label>
            <input type="text" id="lastName" name="lastName" placeholder="Enter your last name" required>
    
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" placeholder="Enter your address" required>
    
            <label for="city">City:</label>
            <input type="text" id="city" name="city" placeholder="Enter your city" required>
    
            <label for="state">State:</label>
            <select id="state" name="state" required>
                <option value="" disabled selected>Select your state</option>
                <option value="California">California</option>
                <option value="Texas">Texas</option>
                <option value="New York">New York</option>
            </select>
    
            <label for="zipcode">Zipcode:</label>
            <input type="text" id="zipcode" name="zipcode" placeholder="Enter your zipcode" required>

            <label for="deposit">Initial Deposit:</label>
            <div style="display: flex; align-items: center;">
            <span style="margin-right: 4px;">$</span>
            <input type="number" id="deposit" name="deposit" value="0" step="0.01" min="0" required>
            </div>
    
            <div class="button-container">
                <button type="submit" class="button">Register</button>
                <a href="/" class="button">Back to Home</a>
            </div>
        </form>
    </div>
</body>
</html>
